CREATE TABLE USUARIOS (
	ID_USUARIO INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	NOME VARCHAR(895) NOT NULL,
	SENHA VARCHAR(512) NOT NULL,
	ATIVO BOOLEAN DEFAULT TRUE,
	TIPO INTEGER DEFAULT 1,
	CPF VARCHAR(50) NOT NULL,
	EMAIL VARCHAR(255) NOT NULL,
	TELEFONE VARCHAR(50) NOT NULL,
	
	CONSTRAINT PK_ID_USUARIO_USUARIOS PRIMARY KEY (ID_USUARIO),
	CONSTRAINT UQ_CPF_USUARIOS UNIQUE (CPF),
	CONSTRAINT UQ_EMAIL_USUARIOS UNIQUE (EMAIL),
	CONSTRAINT UQ_TELEFONE_USUARIOS UNIQUE (TELEFONE)
);

CREATE TABLE PRODUTOS (
	ID_PRODUTO INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	NOME VARCHAR(895) NOT NULL,
	CODIGO_BARRAS INTEGER NOT NULL,
	QUANTIDADE INTEGER NOT NULL,
	PRECO FLOAT NOT NULL,
	
	CONSTRAINT PK_ID_PRODUTO_PRODUTOS PRIMARY KEY (ID_PRODUTO),
	CONSTRAINT UQ_CODIGO_BARRAS_PRODUTOS UNIQUE (CODIGO_BARRAS)
);

CREATE TABLE MOVIMENTACOES (
	ID_MOVIMENTACAO INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	ID_USUARIO INTEGER NOT NULL,
	DATA_MOVIMENTACAO TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	
	CONSTRAINT PK_ID_MOVIMENTACAO_MOVIMENTACOES PRIMARY KEY (ID_MOVIMENTACAO),
	CONSTRAINT FK_ID_USUARIO_MOVIMENTACOES FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID_USUARIO)
);

CREATE TABLE GRUPOS_PRODUTOS (
	ID_GRUPO_PRODUTOS INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	ID_MOVIMENTACAO INTEGER NOT NULL,
	ID_PRODUTO INTEGER NOT NULL,
	
	CONSTRAINT PK_ID_GRUPO_PRODUTOS_GRUPOS_PRODUTOS PRIMARY KEY (ID_GRUPO_PRODUTOS),
	CONSTRAINT FK_ID_MOVIMENTACAO_GRUPOS_PRODUTOS FOREIGN KEY (ID_MOVIMENTACAO) REFERENCES MOVIMENTACOES (ID_MOVIMENTACAO),
	CONSTRAINT FK_ID_PRODUTO_GRUPOS_PRODUTOS FOREIGN KEY (ID_PRODUTO) REFERENCES PRODUTOS (ID_PRODUTO)
);